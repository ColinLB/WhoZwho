<!--
Copyright (C) 2012 C. R. Leavett-Brown
You may distribute under the terms of either the GNU General Public
License or the Apache v2 License, as specified in the README file.
-->

{% extends "SessionAuthenticated.html" %}
{% load TemplateTags %}

{% block body %}
  <table>
    <tr valign="top">
      <td class=left_margin></td>
        {% if name.picture_uploaded %}
          <td><img class="show_image" src="{{ ZS.httpURL }}static/pics/names/{{ name.id }}.jpg"></td>
        {% else %}
          <td><img class="show_image" src="{{ ZS.httpURL }}static/pics/defaults/nicubunu_Abstract_person.svg"></td>
        {% endif %}

      <td class=left_margin></td>
      <td class="table_column" rowspan=3>
        <span id=page_title>{{ name|PersonalName }}</span>

        {% if name.birthday %}
          &nbsp({{ name|Birthday }})
        {% endif %}

        {% if name|PersonalContacts %}
          <br>
          {% for contact in name|PersonalContacts %}
            <br>&nbsp&nbsp{{ contact }}
          {% endfor %}
        {% endif %}


        {% if name.address %}
          <br>
          <br>&nbsp&nbspPersonal address:
          {% for entry in name.address|FormatAddress %}
            <br>&nbsp&nbsp&nbsp&nbsp{{ entry }}
          {% endfor %}
          &nbsp&nbsp&nbsp<a class="more_info" href="{{ ZS.httpURL }}map/{{ name.address.id }}/{{ browser_tab }}"">map</a>
        {% endif %}

        {% if name.family %}
          {% if name.family.address %}
            <br>
            <br>&nbsp&nbspFamily address:
            {% for entry in name.family.address|FormatAddress %}
              <br>&nbsp&nbsp&nbsp&nbsp{{ entry }}
            {% endfor %}
            &nbsp&nbsp&nbsp<a class="more_info" href="{{ ZS.httpURL }}map/{{ name.family.address.id }}/{{ browser_tab }}"">map</a>
          {% endif %}

          <br>
          <br>&nbsp&nbspFamily:
          <br>&nbsp&nbsp&nbsp&nbsp{{ name|FamilyName }}
          {% if name.family.anniversary %}
            &nbsp({{ name.family.anniversary }})
          {% endif %}

          {% for kids in name|Kids %}
            <br>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{{ kids }}
          {% endfor %}
        {% endif %}

        {% if name.parents %}
          <br>
          <br>&nbsp&nbspParent(s):
          <br>&nbsp&nbsp&nbsp&nbsp{{ name.parents.spouses.all.0|FamilyName }}

          {% if name.parents.address and name.birthday|Age < 18 %}
            <br>
            <br>&nbsp&nbspParental address:
            {% for entry in name.parents.address|FormatAddress %}
              <br>&nbsp&nbsp&nbsp&nbsp{{ entry }}
            {% endfor %}
            &nbsp&nbsp&nbsp<a class="more_info" href="{{ ZS.httpURL }}map/{{ name.parents.address.id }}/{{ browser_tab }}"">map</a>
          {% endif %}
        {% endif %}
      </td>
    </tr>

    {% if name.family %}
      <tr valign="top">
        <td class=left_margin></td>
          {% if name.family.picture_uploaded %}
            <td><img class="show_image" src="{{ ZS.httpURL }}static/pics/families/{{ name.family.id }}.jpg">
          {% else %}
            <td><img class="show_image" src="{{ ZS.httpURL }}static/pics/defaults/nicubunu_Abstract_people.svg">
          {% endif %}
        </td>
      </tr>
    {% endif %}

    {% if name.parents and name.birthday|Age < 18 %}
      <tr valign="top">
        <td class=left_margin></td>
          {% if name.parents.picture_uploaded %}
            <td><img class="show_image" src="{{ ZS.httpURL }}static/pics/families/{{ name.parents.id }}.jpg">
          {% else %}
            <td><img class="show_image" src="{{ ZS.httpURL }}static/pics/defaults/nicubunu_Abstract_people.svg">
          {% endif %}
        </td>
      </tr>
    {% endif %}
  </table>
{% endblock %}
